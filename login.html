<!DOCTYPE html>
<html lang="bg">
<head>
  <meta charset="UTF-8">
  <title>–í—Ö–æ–¥ | –ü–æ–∂–∞—Ä–Ω–∞ –°–∏—Å—Ç–µ–º–∞</title>
  <link rel="stylesheet" href="css/styles.css">
  <link rel="stylesheet" href="css/login.css">
  <link rel="stylesheet" href="css/navbar.css">
  <link rel="stylesheet" href="css/theme-toggle.css">
  
</head>
<body>
    <div class="navbar" id="navbar">
        <a href="index.html" class="logo-link">
 <img src="logo/Logo.jpg" alt="DataVision Logo" class="navbar-logo"></a>
        <a href="index.html">Home</a>
        <a href="information.html">Information</a>
        <a href="employer.html">Employer</a>
        <a href="cars.html">Cars</a>
        <a href="incidents.html">Incidents</a>
        <a href="statistics.html">Statistics</a>
        <a href="map.html">Map</a>
        <a href="login.html" class="active">Log in</a>
        <button class="theme-toggle" onclick="toggleTheme()">
      <span class="theme-icon">üåô</span>
      <span class="theme-text">Dark</span>
    </button>
    </div>

    <div class="content">
        <div class="login-wrapper">
            <div class="login-box">
                <div class="login-header">
                    <h1 id="formTitle">–ü–æ–∂–∞—Ä–Ω–∞ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç</h1>
                    <p id="formSubtitle">–í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º–∞—Ç–∞ –∑–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</p>
                </div>

                <div id="loginSection" class="login-form-section active">
                    <form id="loginForm">
                        <label for="username">–ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—Å–∫–æ –∏–º–µ:</label>
                        <input type="text" id="username" name="username" required>

                        <label for="password">–ü–∞—Ä–æ–ª–∞:</label>
                        <input type="password" id="password" name="password" required>

                        <div class="options">
                            <label><input type="checkbox">–ó–∞–ø–æ–º–Ω–∏ –º–µ</label>
                        </div>

                        <button type="submit">–í—Ö–æ–¥</button>

                        <div class="signup-button">
                            <p>–ù—è–º–∞—Ç–µ –∞–∫–∞—É–Ω—Ç?</p>
                            <button type="button" id="showRegisterBtn" class="register-btn">–°—ä–∑–¥–∞–π –ø—Ä–æ—Ñ–∏–ª</button>
                        </div>
                    </form>
                </div>

                <div id="registerSection" class="register-form-section">
                    <form id="registrationForm">
                        <label for="regEmail">–ò–º–µ–π–ª:</label>
                        <input type="email" id="regEmail" name="regEmail" required>

                        <label for="regUsername">–ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—Å–∫–æ –∏–º–µ:</label>
                        <input type="text" id="regUsername" name="regUsername" required>

                        <label for="regPassword">–ü–∞—Ä–æ–ª–∞:</label>
                        <input type="password" id="regPassword" name="regPassword" required>

                        <label for="confirmPassword">–ü–æ—Ç–≤—ä—Ä–¥–∏ –ü–∞—Ä–æ–ª–∞:</label>
                        <input type="password" id="confirmPassword" name="confirmPassword" required>

                        <button type="submit">–†–µ–≥–∏—Å—Ç—Ä–∏—Ä–∞–π —Å–µ</button>

                        <div class="signup-button">
                            <p>–í–µ—á–µ –∏–º–∞—Ç–µ –∞–∫–∞—É–Ω—Ç?</p>
                            <button type="button" id="showLoginBtn" class="register-btn">–í—Ö–æ–¥</button>
                        </div>
                    </form>
                </div>

            </div>
        </div>
    </div>
    <script src="js/theme-toggle.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const loginSection = document.getElementById('loginSection');
            const registerSection = document.getElementById('registerSection');
            const showRegisterBtn = document.getElementById('showRegisterBtn');
            const showLoginBtn = document.getElementById('showLoginBtn');
            const formTitle = document.getElementById('formTitle');
            const formSubtitle = document.getElementById('formSubtitle');

            const loginForm = document.getElementById('loginForm');
            const registrationForm = document.getElementById('registrationForm');

            if (showRegisterBtn) {
                showRegisterBtn.addEventListener('click', () => {
                    loginSection.classList.remove('active');
                    registerSection.classList.add('active');
                    formTitle.textContent = '–°—ä–∑–¥–∞–≤–∞–Ω–µ –Ω–∞ –ü—Ä–æ—Ñ–∏–ª';
                    formSubtitle.textContent = '–ú–æ–ª—è, –ø–æ–ø—ä–ª–Ω–µ—Ç–µ –¥–∞–Ω–Ω–∏—Ç–µ –∑–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è';
                });
            }
            if (showLoginBtn) {
                showLoginBtn.addEventListener('click', () => {
                    registerSection.classList.remove('active');
                    loginSection.classList.add('active');
                    formTitle.textContent = '–ü–æ–∂–∞—Ä–Ω–∞ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç';
                    formSubtitle.textContent = '–í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º–∞—Ç–∞ –∑–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ';
                });
            }

            if (registrationForm) {
                registrationForm.addEventListener('submit', (event) => {
                    event.preventDefault();

                    const email = document.getElementById('regEmail').value.trim();
                    const username = document.getElementById('regUsername').value.trim();
                    const password = document.getElementById('regPassword').value;
                    const confirmPassword = document.getElementById('confirmPassword').value;

                    if (!email || !username || !password || !confirmPassword) {
                        alert('–ú–æ–ª—è, –ø–æ–ø—ä–ª–Ω–µ—Ç–µ –≤—Å–∏—á–∫–∏ –ø–æ–ª–µ—Ç–∞!');
                        return;
                    }

                    if (password !== confirmPassword) {
                        alert('–ü–∞—Ä–æ–ª–∏—Ç–µ –Ω–µ —Å—ä–≤–ø–∞–¥–∞—Ç! –ú–æ–ª—è, –æ–ø–∏—Ç–∞–π—Ç–µ –æ—Ç–Ω–æ–≤–æ.');
                        return;
                    }

                    const users = JSON.parse(localStorage.getItem('users')) || [];
                    const userExists = users.some(user => user.username === username || user.email === email);

                    if (userExists) {
                        alert('–ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—Å–∫–æ –∏–º–µ –∏–ª–∏ –∏–º–µ–π–ª –≤–µ—á–µ –µ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–∞–Ω/–æ. –ú–æ–ª—è, –∏–∑–±–µ—Ä–µ—Ç–µ –¥—Ä—É–≥–∏.');
                        return;
                    }

                    const newUser = { email, username, password };
                    users.push(newUser);
                    localStorage.setItem('users', JSON.stringify(users));

                    alert('–£—Å–ø–µ—à–Ω–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è! –í–µ—á–µ –º–æ–∂–µ—Ç–µ –¥–∞ –≤–ª–µ–∑–µ—Ç–µ.');
                    registerSection.classList.remove('active');
                    loginSection.classList.add('active');
                    formTitle.textContent = '–ü–æ–∂–∞—Ä–Ω–∞ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç';
                    formSubtitle.textContent = '–í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º–∞—Ç–∞ –∑–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ';
                    registrationForm.reset();
                });
            }
            if (loginForm) {
                loginForm.addEventListener('submit', (event) => {
                    event.preventDefault();

                    const username = document.getElementById('username').value.trim();
                    const password = document.getElementById('password').value;

                    if (!username || !password) {
                        alert('–ú–æ–ª—è, –≤—ä–≤–µ–¥–µ—Ç–µ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—Å–∫–æ –∏–º–µ –∏ –ø–∞—Ä–æ–ª–∞!');
                        return;
                    }

                    const users = JSON.parse(localStorage.getItem('users')) || [];
                    const foundUser = users.find(user => user.username === username && user.password === password);

                    if (foundUser) {
                        alert('–£—Å–ø–µ—à–µ–Ω –≤—Ö–æ–¥! –î–æ–±—Ä–µ –¥–æ—à–ª–∏, ' + foundUser.username + '!');
                        window.location.href = 'index.html';
                    } else {
                        alert('–ì—Ä–µ—à–Ω–æ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—Å–∫–æ –∏–º–µ –∏–ª–∏ –ø–∞—Ä–æ–ª–∞.');
                    }
                });
            }
        });
    </script>
</body>
</html>